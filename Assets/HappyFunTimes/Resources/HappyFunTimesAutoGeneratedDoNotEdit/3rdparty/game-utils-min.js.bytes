!function(t){function e(n){if(r[n])return r[n].exports;var a=r[n]={exports:{},id:n,loaded:!1};return t[n].call(a.exports,a,a.exports,e),a.loaded=!0,a.exports}var r={};return e.m=t,e.c=r,e.p="",e(0)}([function(t,e,r){var n,a;n=[r(1),r(5),r(6)],a=function(t,e,r){window.AudioManager=t,window.imageLoader=e,window.imageUtils=r}.apply(e,n),!(void 0!==a&&(t.exports=a))},function(t,e,r){var n,a;"use strict",n=[r(2)],a=function(t){var e=window.AudioContext||window.webkitAudioContext||window.mozAudioContext,r=function(r,n){function a(t,e,r,n){this.name=t;var a=this,i=new XMLHttpRequest;i.open("GET",e,!0),i.responseType="arraybuffer",i.onload=function(){o.decodeAudioData(i.response,function(t){a.buffer=t,n&&n(!1)},function(){console.error("failed to decoding audio buffer: "+e),n&&n(!0)})},i.addEventListener("error",function(t){console.error("failed to load:",e," : ",t.target.status)},!1),i.send()}function i(t,e,r,n){this.waiting_on_load=r,this.samples=r||1,this.name=t,this.play_idx=0,this.audio={};for(var a=0;r>a;a++){var i=new Audio,o=this,u=function(t){o.waiting_on_load--,n&&n(t)};i.addEventListener("canplaythrough",function(){u(!1)},!1),i.src=e,i.onerror=function(){u(!0)},i.load(),this.audio[a]=i}}n=n||{};var o,u,s,c,f,h,d,l={},v=!1,p=function(t,e){return t.substring(0,t.length-3)+e};this.needUserGesture=function(){var t=!!navigator.userAgent.match(/(iPad|iPhone|iPod)/g),e=t;return function(){return e}}();var g=function(){};g.prototype.play=function(t,e){if(!this.buffer)return console.log(this.name," not loaded"),void 0;var r=o.createBufferSource();return r.buffer=this.buffer,r.loop=e||!1,r.connect(o.destination),r.start?r.start(t):r.noteOn(t),r};var m=function(e,r,n,a){this.buffer=t.createAudioBuffer(o,r),a&&setTimeout(a,0)};m.prototype=new g,a.prototype=new g;var y=function(e,r,n,a){this.samples=n||1,this.audio={},this.playNdx=0;for(var i=0;n>i;++i)this.audio[i]=t.createWave(r);a&&setTimeout(a,0)};y.prototype.play=function(t,e){this.playNdx=(this.playNdx+1)%this.samples;var r=this.audio[this.playNdx],n=new Audio;n.src=r.src,n.addEventListener("canplaythrough",function(){n.play()},!1),n.load()},i.prototype.play=function(t,e){if(this.waiting_on_load>0)return console.log(this.name," not loaded"),void 0;this.play_idx=(this.play_idx+1)%this.samples;var r=this.audio[this.play_idx],n=new Audio;n.src=r.src,n.addEventListener("canplaythrough",function(){n.play()},!1),n.load()};this.playSound=function(t,e,r){if(v){var n=l[t];return n?n.play(e,r):(console.error("audio: '"+t+"' not known."),void 0)}}.bind(this),this.getTime=function(){return o?o.currentTime:.001*Date.now()}.bind(this);var w=function(){if(this.needUserGesture())for(var t=0,e=window,r=["touchstart","mousedown"],a=function(){if(++t,1==t){var i=o.createOscillator(),u=o.createGain();i.frequency.value=1,i.connect(u),u.gain.value=0,u.connect(o.destination),i.start?i.start(0):i.noteOn(0),setTimeout(function(){i.disconnect()},100);for(var s=0;s<r.length;++s)e.removeEventListener(r[s],a,!1);n.startedOnTouchCallback&&n.startedOnTouchCallback()}},i=0;i<r.length;++i)e.addEventListener(r[i],a,!1)}.bind(this);this.loadSound=function(t,e,r,n){var a=e.substring(e.length-3);"ogg"!=a||u?"mp3"!=a||s||(e=p(e,"ogg")):e=p(e,"mp3");var i=new h(t,e,r,n);return l[t]=i,i}.bind(this),this.makeJSFXSound=function(t,e,r,n){var a=new d(t,e,r,n);return l[t]=a,a}.bind(this),this.loadSounds=function(t,e){var r=1,n=function(){--r,0==r&&e&&e()};Object.keys(t).forEach(function(e){var a=t[e];++r,a.jsfx?this.makeJSFXSound(e,a.jsfx,a.samples,n):this.loadSound(e,a.filename,a.samples,n)}.bind(this)),setTimeout(n,0)},this.init=function(t){var r=new Audio;u=r.canPlayType("audio/ogg"),s=r.canPlayType("audio/mp3"),c=r.canPlayType("audio/wav"),f=r.canPlayType("audio/aif")||r.canPlayType("audio/aiff"),v=u||s,v&&(e?(console.log("Using Web Audio API"),o=new e,o.createGain||(o.createGain=o.createGainNode.bind(o)),h=a,d=m):(console.log("Using Audio Tag"),h=i,d=y),t&&this.loadSounds(t),e&&w())}.bind(this),this.init(r),this.getSoundIds=function(){return Object.keys(l)}};return r.hasWebAudio=function(){return void 0!==e},r}.apply(e,n),!(void 0!==a&&(t.exports=a))},function(t,e,r){var n,a;"use strict",n=[r(3),r(4)],a=function(t,e){var r={};return function(){this.createWaves=function(t){var e={};for(var r in t){var n=t[r];e[r]=this.createWave(n)}return e},this.createWave=function(r){var n=this.arrayToParams(r),a=e.generate(n),i=t.make(a);return i},this.createAudioBuffers=function(t,e){var r={};for(var n in e){var a=e[n];r[n]=this.createAudioBuffer(t,a)}return r},this.createAudioBuffer=function(r,n){var a=this.arrayToParams(n),i=e.generate(a),o=t.makeAudioBuffer(r,i);return o},this.paramsToArray=function(t){for(var r=[],n=e.Parameters.length,a=0;n>a;a++)r.push(t[e.Parameters[a].id]);return r},this.arrayToParams=function(t){for(var r={},n=e.Parameters.length,a=0;n>a;a++)r[e.Parameters[a].id]=t[a];return r}}.apply(r),r}.apply(e,n),!(void 0!==a&&(t.exports=a))},function(t,e,r){var n;"use strict",n=function(){var t={};return function(t){this.SampleRate=t||44100;var e=this.SampleRate,r=16,n=1,a=n*r>>3,i=e*a,o=String.fromCharCode,u="data:audio/wav;base64,",s=function(t){var o;return d(["RIFF",36+(o=t.length),"WAVEfmt ",16,1,n,e,i,a,r,"data",o,t],"s4s4224422s4s")};this.make=function(t){return new Audio(u+btoa(s(w(t))))},this.makeWaveFile=function(t){l(u+btoa(s(w(t))))},this.makeAudioBuffer=function(t,r){for(var n=t.createBuffer(1,r.length,e),a=n.getChannelData(0),i=0;i<r.length;++i)a[i]=r[i];return n};var c,f,h=function(t,e){var r=255;return e?o(t&r)+h(t>>8,e-1):""},d=function(t,e){var r="";for(f=0;f<t.length;f++)r+="s"==e[f]?t[f]:h(t[f],e.charCodeAt(f)-48);return r},l=function(t){document.location.href=t},v=Math.sin,p=2*Math.PI,g=function(t){return new Array(0|t)};this.toTime=function(t){return t/e},this.toSamples=function(t){return t*e};var m=function(t){var e="",r=t.length;for(f=0;r>f;f++){var n=32767*t[f]|0;n=-32768>n?-32768:n>32767?32767:n,n+=0>n?65536:0,e+=String.fromCharCode(255&n,n>>8)}return e},y=function(t){var e="",r=t.length;for(f=0;r>f;f++){var n=127*t[f]+128|0;n=0>n?0:n>255?255:n,e+=String.fromCharCode(n)}return e},w=function(t){return 16==r?m(t):y(t)};this.adjustVolume=function(t,e){for(f=0;f<t.length;f++)t[f]*=e;return t},this.filter=function(t,e,r,n,a,i,o,u,s,h){for(r=r?r:1,n=n?n:t.length,c=t.slice(0),f=r;n>f;f++)c[f]=e(t,c,r,n,f,a,i,o,u,s,h);return c};var S=this.filter;this.filters={lowpass:function(t,e,r,n,a,i){return e[a-1]+i*(t[a]-e[a-1])},lowpassx:function(t,e,r,n,a,i){return e[a-1]+i*(n-a)/(n-r)*(t[a]-e[a-1])},highpass:function(t,e,r,n,a,i){return i*(e[a-1]+t[a]-t[a-1])}};var b=this.filters;this.f={lowpass:function(t,e,r,n){return S(t,b.lowpass,e,r,n)},lowpassx:function(t,e,r,n){return S(t,b.lowpassx,e,r,n)},highpass:function(t,e,r,n){return S(t,b.highpass,e,r,n)}},this.generate=function(t,r,n,a,i,o,u,s,c){var h=r*p/e,d=g(t);for(f=0;t>f;f++)d[f]=n(f*h,a,i,o,u,s,c);return d};var x=0,C=this.generate;this.generators={noise:function(t){return 4>t%p&&(x=2*Math.random()-1),x},uninoise:Math.random,sine:Math.sin,synth:function(t){return v(t)+.5*v(t/2)+.3*v(t/4)},saw:function(t){return 2*(t/p-(t/p+.5|0))},square:function(t,e){return v(t)>e?1:v(t)<e?-1:e}};var F=this.generators;this.g={noise:function(t){return C(t,0,F.noise)},sine:function(t,e){return C(t,e,F.sine)},synth:function(t,e){return C(t,e,F.synth)},saw:function(t,e){return C(t,e,F.saw)},square:function(t,e,r){return C(t,e,F.square,r)}}}.apply(t),t}.call(e,r,e,t),!(void 0!==n&&(t.exports=n))},function(t,e,r){var n,a;"use strict",n=[r(3)],a=function(t){var e={};return function(){this.Parameters=[],this.Generators={square:t.generators.square,saw:t.generators.saw,sine:t.generators.sine,noise:t.generators.noise,synth:t.generators.synth},this.getGeneratorNames=function(){var t=[];for(var e in this.Generators)t.push(e);return t};var r=function(t){return t.replace(/ /g,"")};this.getParameters=function(){var t=[],e=0,n=function(n,a,i,o,u){void 0===u&&(u=(i-a)/1e3);var s={name:n,id:r(n),min:a,max:i,step:u,def:o,type:"range",group:e};t.push(s)},a=function(n,a,i){var o={name:n,id:r(n),options:a,def:i,type:"option",group:e};t.push(o)},i=this.getGeneratorNames();return a("Generator",i,i[0]),n("Super Sampling Quality",0,16,0,1),n("Master Volume",0,1,.4),e++,n("Attack Time",0,1,.1),n("Sustain Time",0,2,.3),n("Sustain Punch",0,3,2),n("Decay Time",0,2,1),e++,n("Min Frequency",20,2400,0,1),n("Start Frequency",20,2400,440,1),n("Max Frequency",20,2400,2e3,1),n("Slide",-1,1,0),n("Delta Slide",-1,1,0),e++,n("Vibrato Depth",0,1,0),n("Vibrato Frequency",.01,48,8),n("Vibrato Depth Slide",-.3,1,0),n("Vibrato Frequency Slide",-1,1,0),e++,n("Change Amount",-1,1,0),n("Change Speed",0,1,.1),e++,n("Square Duty",0,.5,0),n("Square Duty Sweep",-1,1,0),e++,n("Repeat Speed",0,.8,0),e++,n("Phaser Offset",-1,1,0),n("Phaser Sweep",-1,1,0),e++,n("LP Filter Cutoff",0,1,1),n("LP Filter Cutoff Sweep",-1,1,0),n("LP Filter Resonance",0,1,0),n("HP Filter Cutoff",0,1,0),n("HP Filter Cutoff Sweep",-1,1,0),t},this.generate=function(r){var n=2*Math.PI,a=Math.sin,i=(Math.cos,Math.pow),o=Math.abs,u=t.SampleRate,s=0|r.SuperSamplingQuality;1>s&&(s=1),u*=s;for(var c=1+r.SustainPunch,f=[{from:0,to:1,time:r.AttackTime},{from:c,to:1,time:r.SustainTime},{from:1,to:0,time:r.DecayTime}],h=f.length,d=0;h>d;d++)f[d].samples=1+(f[d].time*u|0);for(var l=void 0,v=0,p=-1,g=0,m=-1,y=0,d=0;h>d;d++)y+=f[d].samples;u/2>y&&(y=u/2);var w=y/s|0,S=new Array(w),b=0,x=0,C=e.Generators[r.Generator];void 0===C&&(C=this.Generators.square);var F=0,P=0;F=r.SquareDuty;var T=r.SquareDutySweep/u,A=0,q=r.StartFrequency*n/u,M=1+64*i(r.Slide,3)/u,k=i(r.DeltaSlide,3)/(1e3*u);void 0!==s&&(k/=s),r.MinFrequency>r.StartFrequency&&(r.MinFrequency=r.StartFrequency),r.MaxFrequency<r.StartFrequency&&(r.MaxFrequency=r.StartFrequency);var D=r.MinFrequency*n/u,R=r.MaxFrequency*n/u,I=0,L=r.VibratoFrequency*n/u,G=r.VibratoDepth,E=1+3*i(r.VibratoFrequencySlide,3)/u,B=r.VibratoDepthSlide/u,H=0,V=r.ChangeSpeed*u,O=i(r.ChangeAmount,2);O=r.ChangeAmount>0?1+10*O:1-.9*O;for(var W=1024,_=1023,j=new Array(W),N=0;W>N;N++)j[N]=0;var U=0,X=i(r.PhaserOffset,2)*(W-4),J=4e3*i(r.PhaserSweep,3)/u,Q=o(J)>1e-5||o(X)>1e-5,z=r.HPFilterCutoff>.001||r.LPFilterCutoff<.999,K=0,Y=0,Z=i(r.LPFilterCutoff,3)/10,$=1+r.HPFilterCutoffSweep/1e4,tt=5/(1+20*i(r.LPFilterResonance,2))*(.01+r.LPFilterCutoff);tt>.8&&(tt=.8),tt=1-tt;var et=r.LPFilterCutoff<.999,rt=0,nt=i(r.HPFilterCutoff,2)/10,at=1+r.HPFilterCutoffSweep/1e4,it=0,ot=y;r.RepeatSpeed>0&&(ot=i(1-r.RepeatSpeed,2)*u+32);for(var ut=r.MasterVolume,st=0,d=0;y>d;d++){b=C(A,F,P),F+=T,0>F?F=0:F>.5&&(F=.5),it>ot&&(A=0,q=r.StartFrequency*n/u,M=1+3*i(r.Slide,3)/u,k=i(r.DeltaSlide,3)/(1e3*u),void 0!==s&&(k/=s),H=0,V=r.ChangeSpeed*u,O=1+(0|r.ChangeAmount)/12,it=0),it+=1,A+=q,M+=k,q*=M,H>V&&(q*=O,V=y),H+=1,q>R?q=R:D>q&&(q=D),I+=L;var ct=q*a(I)*G;if(A+=ct,L*=E,B&&(G+=B,0>G?(G=0,B=0):G>1&&(G=1,B=0)),z){o(nt)>.001&&(nt*=at,1e-5>nt?nt=1e-5:nt>.1&&(nt=.1));var ft=K;Z*=$,0>Z?Z=0:Z>.1&&(Z=.1),et?(Y+=(b-K)*Z,Y*=tt):(K=b,Y=0),K+=Y,rt+=K-ft,rt*=1-nt,b=rt}if(Q){X+=J,0>X&&(X=-X,J=-J),X>_&&(X=_,J=0),j[U]=b;var ht=U-(0|X)+W&_;b+=j[ht],U=U+1&_}d>m&&(p+=1,l=h>p?f[p]:{from:0,to:0,samples:y},v=l.from,g=(l.to-l.from)/(l.samples+1),m+=l.samples),b*=v,v+=g,b*=ut,s>1?(x+=b,(d+1)%s===0&&(S[st]=x/s,st+=1,x=0)):S[d]=b}for(var dt=u/100|0,lt=new Array(dt),d=0;dt>d;d++)lt[d]=0;return lt.concat(S).concat(lt)},this.Parameters=this.getParameters()}.apply(e),e}.apply(e,n),!(void 0!==a&&(t.exports=a))},function(t,e,r){var n;"use strict",n=function(){var t=function(t,e){var r=new Image;return r.onload=e,r.src=t,r},e=function(e,r){var n=0;Object.keys(e).forEach(function(a){n++,e[a].img=t(e[a].url,function(){n--,0==n&&r()})})};return{loadImage:t,loadImages:e}}.call(e,r,e,t),!(void 0!==n&&(t.exports=n))},function(t,e,r){var n,a;"use strict",n=[r(7)],a=function(t){var e=function(e,r,n,a,i){i=i||[0,1];var o=(i[0]+0)%1,u=(i[1]+0)%1,s=function(t){return t>=o&&u>=t},c=function(t){return t>=o||u>=t},f=u>o?s:c,h=document.createElement("canvas"),d=e.width,l=e.height;h.width=d,h.height=l;var v=h.getContext("2d");v.drawImage(e,0,0);for(var p=v.getImageData(0,0,d,l),g=p.data,m=d*l,y=4*m,w=0;y>w;w+=4){var S=t.rgb255ToHsv(g[w+0],g[w+1],g[w+2]);if(f(S[0])){var b=(S[0]+r+100)%1,x=Math.min(1,Math.max(0,S[1]+n)),C=Math.min(1,Math.max(0,S[2]+a)),F=t.hsvToRgb255(b,x,C);g[w+0]=F[0],g[w+1]=F[1],g[w+2]=F[2]}}return v.putImageData(p,0,0),h},r=function(t,e,r,n,a){var i=document.createElement("canvas");i.width=n,i.height=a;var o=i.getContext("2d");return o.drawImage(t,e,r,n,a,0,0,n,a),i},n=function(t,e,r){var n=document.createElement("canvas");n.width=t.width,n.height=t.height;var a=n.getContext("2d");a.drawImage(t,0,0);var i=a.getImageData(0,0,n.width,n.height),o=i.data;n.width=e,n.height=r;for(var u=a.createImageData(e,r),s=u.data,c=0;r>c;++c)for(var f=c*t.height/r|0,h=c*e*4,d=0;e>d;++d){var l=d*t.width/e|0,v=4*(f*t.width+l);s[h++]=o[v++],s[h++]=o[v++],s[h++]=o[v++],s[h++]=o[v++]}return a.putImageData(u,0,0),n},a=function(t,e){e.font&&(t.font=e.font),e.fillStyle&&(t.fillStyle=e.fillStyle),e.textAlign&&(t.textAlign=e.textAlign),e.testBaseline&&(t.textBaseline=e.textBaselne)},i=function(t,e,r){var n=r||document.createElement("canvas"),i=n.getContext("2d");i.save(),a(i,e);var o=i.measureText(t),u=o.width+(e.padding||0);e.maxWidth&&(u=Math.min(u,e.maxWidth)),e.minWidth&&(u=Math.max(u,e.minWidth));var s=e.padding||0;return n.width=u+2*s,n.height=e.height+2*s,e.prepFn?e.prepFn(i):e.backgroundColor?(i.fillStyle=e.backgroundColor,i.fillRect(0,0,i.canvas.width,i.canvas.height)):i.clearRect(0,0,i.canvas.width,i.canvas.height),a(i,e),i.fillText(t,(e.xOffset||0)+s,(e.yOffset||0)+s),i.restore(),n};return{adjustHSV:e,cropImage:r,hsvToRgb:t.hsvToRgb255,makeTextImage:i,rgbToHsv:t.rgb255ToHsv,scaleImage:n}}.apply(e,n),!(void 0!==a&&(t.exports=a))},function(t,e,r){var n,a;"use strict",n=[],a=function(){var t=function(t,e,r){var n,a,i=Math.max(t,e,r),o=Math.min(t,e,r),u=i,s=i-o;if(a=0==i?0:s/i,i==o)n=0;else{switch(i){case t:n=(e-r)/s+(r>e?6:0);break;case e:n=(r-t)/s+2;break;case r:n=(t-e)/s+4}n/=6}return[n,a,u]},e=function(e,r,n){return t(e/255,r/255,n/255)},r=function(t,e,r){var n,a,i,o=Math.floor(6*t),u=6*t-o,s=r*(1-e),c=r*(1-u*e),f=r*(1-(1-u)*e);switch(o%6){case 0:n=r,a=f,i=s;break;case 1:n=c,a=r,i=s;break;case 2:n=s,a=r,i=f;break;case 3:n=s,a=c,i=r;break;case 4:n=f,a=s,i=r;break;case 5:n=r,a=s,i=c}return[n,a,i]},n=function(t,e,n){var a=r(t,e,n);return[255*a[0]|0,255*a[1]|0,255*a[2]|0]},a=function(t,e,r){return.2126*t+.7152*e+.0722*r},i=function(t,e,r){return a(t/255,e/255,r/255)},o=function(t){return s(t[0],t[1],t[2],t[3])},u=function(t){return c(t[0],t[1],t[2],t[3])},s=function(t,e,r,n){return void 0===n&&(n=1),c(255*t|0,255*e|0,255*r|0,255*n|0)},c=function(t,e,r,n){return void 0===n&&(n=255),"rgba("+t+","+e+","+r+","+n/255+")"};return{hsvToRgb01:r,hsvToRgb255:n,makeCSSColorFromRgba01:s,makeCSSColorFromRgba255:c,makeCSSColorFromRgba01Array:o,makeCSSColorFromRgba255Array:u,rgb01Brightness:a,rgb01ToHsv:t,rgb255Brightness:i,rgb255ToHsv:e}}.apply(e,n),!(void 0!==a&&(t.exports=a))}]);