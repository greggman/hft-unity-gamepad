!function(n){function t(o){if(e[o])return e[o].exports;var r=e[o]={exports:{},id:o,loaded:!1};return n[o].call(r.exports,r,r.exports,t),r.loaded=!0,r.exports}var e={};return t.m=n,t.c=e,t.p="",t(0)}([function(n,t,e){var o,r;o=[e(1),e(6)],r=function(n,t){window.hft=window.hft||{};var e=window.hft;e.GameClient=n,e.SyncedClock=t}.apply(t,o),!(void 0!==r&&(n.exports=r))},function(n,t,e){var o,r;"use strict",o=[e(2),e(3),e(4),e(5)],r=function(n,t,e,o){var r=function(r){function i(n){t.sendJSON(window.location.href,{cmd:"happyFunTimesPing"},function(t,e){n(t,e)},{timeout:2e3})}function c(){}function a(){function n(){i(function(t,e){return t?(setTimeout(n,1e3),void 0):(window.location.href="/",void 0)})}m=c,setTimeout(n,2e3)}function u(n,t){S("_hft_log_",{type:n,msg:t})}r=r||{};var s,f=[],d={},l=r.quiet===!0?console.log.bind(console):function(){};r.gameId||(r.gameId="HFTUnity"),this.addEventListener=function(n,t){d[n]=t},this.removeEventListener=function(n){d[n]=void 0};var p=function(n,t){var e=d[n];e?e.apply(this,t):console.error("GameClient["+r.gameId+"]: unknown event: "+n)}.bind(this),v=function(){for(var n=0;n<f.length;++n)s.send(f[n]);f=[],l("connected"),p("connect")},m=r.reconnect!==!1?a:c,h=function(){s&&(s=void 0,l("disconnected"),p("disconnect"),d={}),m()},g=function(n){p(n.cmd,[n.data])},w=function(n){l(n),p("error"),s&&s.close(),h()},y=function(){f=[],s=r.socket||new o(r),s.on("connect",v.bind(this)),s.on("message",g.bind(this)),s.on("disconnect",h.bind(this)),s.on("error",w.bind(this))}.bind(this),b=function(n,t){if(s){var e={cmd:n,data:t};s.isConnected()?s.send(e):f.push(e)}},S=function(n,t){b("update",{cmd:n,data:t})};this.sendCmd=S,this.error=function(){console.error.apply(console,arguments),u("error",Array.prototype.join.call(arguments," "))},this.errorImpl=function(){u("error",Array.prototype.join.call(arguments," "))},this.log=function(){console.log.apply(console,arguments),u("log",Array.prototype.join.call(arguments," "))},this.logImpl=function(){u("log",Array.prototype.join.call(arguments," "))},y();var T=new n("__hft_id__"),x=e.mergeObjects(r),O=T.get();O||(O=e.makeRandomId(),T.set(O));var _=new n("name");x.data=e.mergeObjects(x.data),x.data.__hft_session_id__=O,x.data.__hft_name__=_.get()||"",b("join",x)};return r}.apply(t,o),!(void 0!==r&&(n.exports=r))},function(n,t,e){var o;o=function(){var n=function(n,t){var e=t||"/";this.set=function(t,o){if(void 0===t)return this.erase(),void 0;if(window.hftSettings&&window.hftSettings.inApp)return window.localStorage.setItem(n,t),void 0;var r="";o=o||9999;var i=new Date;i.setTime(Date.now()+Math.floor(24*o*60*60*1e3)),r="; expires="+i.toGMTString();var c=encodeURIComponent(n)+"="+encodeURIComponent(t)+r+"; path="+e;document.cookie=c},this.get=function(){if(window.hftSettings&&window.hftSettings.inApp)return window.localStorage.getItem(n);for(var t=encodeURIComponent(n)+"=",e=document.cookie.split(";"),o=0;o<e.length;++o){for(var r=e[o];" "===r.charAt(0);)r=r.substring(1,r.length);if(0===r.indexOf(t))return decodeURIComponent(r.substring(t.length,r.length))}},this.erase=function(){return window.hftSettings&&window.hftSettings.inApp?window.localStorage.removeItem(n):(document.cookie=this.set(" ",-1),void 0)}};return n}.call(t,e,t,n),!(void 0!==o&&(n.exports=o))},function(n,t,e){var o;"use strict",o=function(){var n=function(){},t=function(t,e,o,r){r=r||{};var i=new XMLHttpRequest;i.overrideMimeType&&i.overrideMimeType("text/plain");var c=r.timeout||0;c&&(i.timeout=c,n("set timeout to: "+i.timeout)),i.open("POST",t,!0);var a=JSON.stringify(e),u=function(t,e){o&&(n("calling-callback:"+(t?" has error":"success")),o(t,e),o=void 0)},s=function(){n("--error--"),u("error sending json to "+t)},f=function(){n("--timeout--"),u("timeout sending json to "+t)},d=function(){o&&(n("--forced timeout--"),i.abort(),u("forced timeout sending json to "+t))},l=function(){n("--finish--");var e=void 0,o=200===i.status||0===i.status;if(o)try{e=JSON.parse(i.responseText)}catch(r){o=!1}u(o?null:"could not load: "+t,e)};try{c&&setTimeout(d,c+50),i.addEventListener("load",l,!1),i.addEventListener("timeout",f,!1),i.addEventListener("error",s,!1),i.setRequestHeader("Content-type","application/json"),i.send(a),n("--sent: "+t)}catch(p){n("--exception--"),setTimeout(function(){u("could not load: "+t,null)},0)}};return{sendJSON:t}}.call(t,e,t,n),!(void 0!==o&&(n.exports=o))},function(n,t,e){var o;"use strict",o=function(){function n(n,t){"?"===n[0]&&(n=n.substring(1));var e=t||{};return n.split("&").forEach(function(n){var t=n.split("=").map(decodeURIComponent);e[t[0]]=void 0!==t[1]?t[1]:!0}),e}function t(n){return"?"+Object.keys(n).filter(function(t){return void 0!==n[t]}).map(function(t){return encodeURIComponent(t)+"="+encodeURIComponent(n[t])}).join("&")}function e(n,t){for(var e=t.substr(0,1).toUpperCase()+t.substr(1),o=0;o<v.length;++o){var r=v[o],i=r+r?e:t,c=n[i];if(c)return c.bind(n)}}function o(n){var t=document.createElement("iframe");return t.style.display="none",t.src=n,document.body.appendChild(t),t}function r(n){return n[m(n.length)]}function i(n,t){return Object.keys(n).forEach(function(e){t[e]=n[e]}),t}function c(n){var t={};return Array.prototype.slice.call(arguments).forEach(function(n){n&&i(n,t)}),t}function a(n){n=n||16;for(var t="",e=0;n>e;++e)t+=(16*Math.random()|0).toString(16);return t}function u(n,t){Object.keys(t).forEach(function(e){n.addEventListener(e,t[e])})}var s=function(n,t,e){return Object.keys(n).forEach(function(o){if(2!==e||void 0===t[o]){var r=n[o];if(r instanceof Array){var i=t[o];i||(i=[],t[name]=i),s(r,i,e)}else if(!(r instanceof Object)||r instanceof Function||r instanceof HTMLElement){if(1===e&&void 0!==t[o])return;t[o]=r}else{var c=t[o];c||(c={},t[o]=c),s(r,c,e)}}}),t},f=function(t,e){var o=e||{};try{var r=t.indexOf("?"),i=t.indexOf("#");0>i&&(i=t.length);var c=t.substring(r+1,i);n(c,o)}catch(i){console.error(i)}return o},d=function(t){return n(window.location.search,t)},l=new RegExp("([a-zA-Z0-9_]+):","g"),p=function(n,t){var e=t||"settings",o=d(),r=n||{},i=o[e];if(i){var c=i.replace(l,'"$1":'),a=JSON.parse(c);s(a,r)}return r},v=["","moz","webkit","ms"],m=function(n){return Math.floor(Math.random()*n)},h=function(n){for(var t=n||m,e=t(3),o=[],r=0;3>r;++r)o.push(t(128)+(r===e?128:64));return"rgb("+o.join(",")+")"},g=function(n){for(var t=n||m,e=t(3),o=255,r=0;3>r;++r)o=o<<8|t(128)+(r===e?128:64);return o},w=function(n){for(var t=0;t<document.styleSheets.length;++t){var e=document.styleSheets[t],o=e.cssRules||e.rules;if(o)for(var r=0;r<o.length;++r){var i=o[r];if(i.selectorText===n)return i}}},y=function(n){var t=document.createTextNode("");return n.appendChild(t),t},b=function(n){var t={x:n.offsetLeft,y:n.offsetTop};if(n.offsetParent){var e=b(n.offsetParent);t.x+=e.x,t.y+=e.y}return t},S=function(n,t,e){return Math.max(t,Math.min(e,n))},T=function(n,t){return S(n,-t,t)},x=function(n){return 0>n?-1:n>0?1:0},O=function(n,t){return Math.abs(n)<Math.abs(t)?n:t},_=function(n,t){return x(n)*(t-Math.min(t,Math.abs(n)))},j=function(n){return n*Math.PI/180},k=function(n){return 180*n/Math.PI},C=function(n,t){var e=t?window.devicePixelRatio:1;e=e||1;var o=Math.floor(n.clientWidth*e),r=Math.floor(n.clientHeight*e);return n.width!==o||n.height!==r?(n.width=o,n.height=r,!0):void 0};return{applyObject:i,applyUrlSettings:p,applyListeners:u,clamp:S,clampPlusMinus:T,copyProperties:s,createTextNode:y,degToRad:j,findCSSStyleRule:w,getAbsolutePosition:b,getFunctionByPrefix:e,gotoIFrame:o,invertPlusMinusRange:_,makeRandomId:a,mergeObjects:c,minToZero:O,objectToSearchString:t,parseUrlQuery:d,parseUrlQueryString:f,pickRandomElement:r,radToDeg:k,randInt:m,randCSSColor:h,rand32BitColor:g,resize:C,sign:x,searchStringToObject:n}}.call(t,e,t,n),!(void 0!==o&&(n.exports=o))},function(n,t,e){var o;"use strict",o=function(){var n=function(n){n=n||{};var t,e=n.quiet===!0?console.log.bind(console):function(){},o=n.url||"ws://"+window.location.host;e("connecting to: "+o),t=new WebSocket(o),this.__defineGetter__("readyState",function(){return t.readyState}),this.isConnected=function(){return t.readyState===WebSocket.OPEN};var r=function(n){t.readyState===WebSocket.OPEN&&t.send(n)};this.on=function(n,e){switch(n){case"connect":t.onopen=e;break;case"disconnect":t.onclose=e;break;case"error":t.onerror=e;break;case"message":t.onmessage=function(n){if("P"===n.data)return r("P"),void 0;try{var t=JSON.parse(n.data)}catch(o){console.log(o)}t&&e(t)}}},this.send=function(n){r(JSON.stringify(n))},this.close=function(){t.close()}};return n}.call(t,e,t,n),!(void 0!==o&&(n.exports=o))},function(n,t,e){var o,r;"use strict",o=[e(3)],r=function(n){var t=function(t,e,o){window.performance||(window.performance={}),window.performance.now||(window.performance.now=function(){return Date.now()});var r=function(){return.001*(new Date).getTime()},i=function(){var n=r(),t=window.performance.now();return function(){var e=window.performance.now(),o=e-t;return n+.001*o}}(),c=window.performance&&window.performance.now?i:r,a=function(n){n&&setTimeout(n,1)};a.prototype.getTime=function(){return c()};var u=function(t,e){var o=window.location.href,r=1e3*(t||10),i=0,a=function(t){var u=c();n.sendJSON(o,{cmd:"time"},function(n,o){if(n)console.error("syncToServer: "+n);else{var s=c(),f=s-u,d=o.time+.5*f;i=d-s,e&&(e(),e=void 0)}t&&setTimeout(function(){a(!0)},r)})},u=function(){a(!1)};a(!0),setTimeout(u,1e3),setTimeout(u,2e3),setTimeout(u,4e3),this.getTime=function(){return c()+i}};return t?new u(e,o):new a(o)};return{createClock:t}}.apply(t,o),!(void 0!==r&&(n.exports=r))}]);