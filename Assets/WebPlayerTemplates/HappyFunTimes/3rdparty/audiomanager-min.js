!function(e){function t(r){if(n[r])return n[r].exports;var a=n[r]={exports:{},id:r,loaded:!1};return e[r].call(a.exports,a,a.exports,t),a.loaded=!0,a.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){var r,a;r=[n(1)],a=function(e){window.AudioManager=e}.apply(t,r),!(void 0!==a&&(e.exports=a))},function(e,t,n){var r,a;"use strict",r=[n(2)],a=function(e){var t=window.AudioContext||window.webkitAudioContext||window.mozAudioContext,n=function(n,r){function a(e,t,n,r){this.name=e;var a=this,i=new XMLHttpRequest;i.open("GET",t,!0),i.responseType="arraybuffer",i.onload=function(){o.decodeAudioData(i.response,function(e){a.buffer=e,r&&r(!1)},function(){console.error("failed to decoding audio buffer: "+t),r&&r(!0)})},i.addEventListener("error",function(e){console.error("failed to load:",t," : ",e.target.status)},!1),i.send()}function i(e,t,n,r){this.waiting_on_load=n,this.samples=n||1,this.name=e,this.play_idx=0,this.audio={};for(var a=0;n>a;a++){var i=new Audio,o=this,u=function(e){o.waiting_on_load--,r&&r(e)};i.addEventListener("canplaythrough",function(){u(!1)},!1),i.src=t,i.onerror=function(){u(!0)},i.load(),this.audio[a]=i}}r=r||{};var o,u,s,f,c,h,d,l={},p=!1,v=function(e,t){return e.substring(0,e.length-3)+t};this.needUserGesture=function(){var e=!!navigator.userAgent.match(/(iPad|iPhone|iPod)/g),t=e;return function(){return t}}();var m=function(){};m.prototype.play=function(e,t){if(!this.buffer)return console.log(this.name," not loaded"),void 0;var n=o.createBufferSource();return n.buffer=this.buffer,n.loop=t||!1,n.connect(o.destination),n.start?n.start(e):n.noteOn(e),n};var y=function(t,n,r,a){this.buffer=e.createAudioBuffer(o,n),a&&setTimeout(a,0)};y.prototype=new m,a.prototype=new m;var g=function(t,n,r,a){this.samples=r||1,this.audio={},this.playNdx=0;for(var i=0;r>i;++i)this.audio[i]=e.createWave(n);a&&setTimeout(a,0)};g.prototype.play=function(e,t){this.playNdx=(this.playNdx+1)%this.samples;var n=this.audio[this.playNdx],r=new Audio;r.src=n.src,r.addEventListener("canplaythrough",function(){r.play()},!1),r.load()},i.prototype.play=function(e,t){if(this.waiting_on_load>0)return console.log(this.name," not loaded"),void 0;this.play_idx=(this.play_idx+1)%this.samples;var n=this.audio[this.play_idx],r=new Audio;r.src=n.src,r.addEventListener("canplaythrough",function(){r.play()},!1),r.load()};this.playSound=function(e,t,n){if(p){var r=l[e];return r?r.play(t,n):(console.error("audio: '"+e+"' not known."),void 0)}}.bind(this),this.getTime=function(){return o?o.currentTime:.001*Date.now()}.bind(this);var S=function(){if(this.needUserGesture())for(var e=0,t=window,n=["touchstart","mousedown"],a=function(){if(++e,1==e){var i=o.createOscillator(),u=o.createGain();i.frequency.value=1,i.connect(u),u.gain.value=0,u.connect(o.destination),i.start?i.start(0):i.noteOn(0),setTimeout(function(){i.disconnect()},100);for(var s=0;s<n.length;++s)t.removeEventListener(n[s],a,!1);r.startedOnTouchCallback&&r.startedOnTouchCallback()}},i=0;i<n.length;++i)t.addEventListener(n[i],a,!1)}.bind(this);this.loadSound=function(e,t,n,r){var a=t.substring(t.length-3);"ogg"!=a||u?"mp3"!=a||s||(t=v(t,"ogg")):t=v(t,"mp3");var i=new h(e,t,n,r);return l[e]=i,i}.bind(this),this.makeJSFXSound=function(e,t,n,r){var a=new d(e,t,n,r);return l[e]=a,a}.bind(this),this.loadSounds=function(e,t){var n=1,r=function(){--n,0==n&&t&&t()};Object.keys(e).forEach(function(t){var a=e[t];++n,a.jsfx?this.makeJSFXSound(t,a.jsfx,a.samples,r):this.loadSound(t,a.filename,a.samples,r)}.bind(this)),setTimeout(r,0)},this.init=function(e){var n=new Audio;u=n.canPlayType("audio/ogg"),s=n.canPlayType("audio/mp3"),f=n.canPlayType("audio/wav"),c=n.canPlayType("audio/aif")||n.canPlayType("audio/aiff"),p=u||s,p&&(t?(console.log("Using Web Audio API"),o=new t,o.createGain||(o.createGain=o.createGainNode.bind(o)),h=a,d=y):(console.log("Using Audio Tag"),h=i,d=g),e&&this.loadSounds(e),t&&S())}.bind(this),this.init(n),this.getSoundIds=function(){return Object.keys(l)}};return n.hasWebAudio=function(){return void 0!==t},n}.apply(t,r),!(void 0!==a&&(e.exports=a))},function(e,t,n){var r,a;"use strict",r=[n(3),n(4)],a=function(e,t){var n={};return function(){this.createWaves=function(e){var t={};for(var n in e){var r=e[n];t[n]=this.createWave(r)}return t},this.createWave=function(n){var r=this.arrayToParams(n),a=t.generate(r),i=e.make(a);return i},this.createAudioBuffers=function(e,t){var n={};for(var r in t){var a=t[r];n[r]=this.createAudioBuffer(e,a)}return n},this.createAudioBuffer=function(n,r){var a=this.arrayToParams(r),i=t.generate(a),o=e.makeAudioBuffer(n,i);return o},this.paramsToArray=function(e){for(var n=[],r=t.Parameters.length,a=0;r>a;a++)n.push(e[t.Parameters[a].id]);return n},this.arrayToParams=function(e){for(var n={},r=t.Parameters.length,a=0;r>a;a++)n[t.Parameters[a].id]=e[a];return n}}.apply(n),n}.apply(t,r),!(void 0!==a&&(e.exports=a))},function(e,t,n){var r;"use strict",r=function(){var e={};return function(e){this.SampleRate=e||44100;var t=this.SampleRate,n=16,r=1,a=r*n>>3,i=t*a,o=String.fromCharCode,u="data:audio/wav;base64,",s=function(e){var o;return d(["RIFF",36+(o=e.length),"WAVEfmt ",16,1,r,t,i,a,n,"data",o,e],"s4s4224422s4s")};this.make=function(e){return new Audio(u+btoa(s(S(e))))},this.makeWaveFile=function(e){l(u+btoa(s(S(e))))},this.makeAudioBuffer=function(e,n){for(var r=e.createBuffer(1,n.length,t),a=r.getChannelData(0),i=0;i<n.length;++i)a[i]=n[i];return r};var f,c,h=function(e,t){var n=255;return t?o(e&n)+h(e>>8,t-1):""},d=function(e,t){var n="";for(c=0;c<e.length;c++)n+="s"==t[c]?e[c]:h(e[c],t.charCodeAt(c)-48);return n},l=function(e){document.location.href=e},p=Math.sin,v=2*Math.PI,m=function(e){return new Array(0|e)};this.toTime=function(e){return e/t},this.toSamples=function(e){return e*t};var y=function(e){var t="",n=e.length;for(c=0;n>c;c++){var r=32767*e[c]|0;r=-32768>r?-32768:r>32767?32767:r,r+=0>r?65536:0,t+=String.fromCharCode(255&r,r>>8)}return t},g=function(e){var t="",n=e.length;for(c=0;n>c;c++){var r=127*e[c]+128|0;r=0>r?0:r>255?255:r,t+=String.fromCharCode(r)}return t},S=function(e){return 16==n?y(e):g(e)};this.adjustVolume=function(e,t){for(c=0;c<e.length;c++)e[c]*=t;return e},this.filter=function(e,t,n,r,a,i,o,u,s,h){for(n=n?n:1,r=r?r:e.length,f=e.slice(0),c=n;r>c;c++)f[c]=t(e,f,n,r,c,a,i,o,u,s,h);return f};var w=this.filter;this.filters={lowpass:function(e,t,n,r,a,i){return t[a-1]+i*(e[a]-t[a-1])},lowpassx:function(e,t,n,r,a,i){return t[a-1]+i*(r-a)/(r-n)*(e[a]-t[a-1])},highpass:function(e,t,n,r,a,i){return i*(t[a-1]+e[a]-e[a-1])}};var P=this.filters;this.f={lowpass:function(e,t,n,r){return w(e,P.lowpass,t,n,r)},lowpassx:function(e,t,n,r){return w(e,P.lowpassx,t,n,r)},highpass:function(e,t,n,r){return w(e,P.highpass,t,n,r)}},this.generate=function(e,n,r,a,i,o,u,s,f){var h=n*v/t,d=m(e);for(c=0;e>c;c++)d[c]=r(c*h,a,i,o,u,s,f);return d};var F=0,b=this.generate;this.generators={noise:function(e){return 4>e%v&&(F=2*Math.random()-1),F},uninoise:Math.random,sine:Math.sin,synth:function(e){return p(e)+.5*p(e/2)+.3*p(e/4)},saw:function(e){return 2*(e/v-(e/v+.5|0))},square:function(e,t){return p(e)>t?1:p(e)<t?-1:t}};var A=this.generators;this.g={noise:function(e){return b(e,0,A.noise)},sine:function(e,t){return b(e,t,A.sine)},synth:function(e,t){return b(e,t,A.synth)},saw:function(e,t){return b(e,t,A.saw)},square:function(e,t,n){return b(e,t,A.square,n)}}}.apply(e),e}.call(t,n,t,e),!(void 0!==r&&(e.exports=r))},function(e,t,n){var r,a;"use strict",r=[n(3)],a=function(e){var t={};return function(){this.Parameters=[],this.Generators={square:e.generators.square,saw:e.generators.saw,sine:e.generators.sine,noise:e.generators.noise,synth:e.generators.synth},this.getGeneratorNames=function(){var e=[];for(var t in this.Generators)e.push(t);return e};var n=function(e){return e.replace(/ /g,"")};this.getParameters=function(){var e=[],t=0,r=function(r,a,i,o,u){void 0===u&&(u=(i-a)/1e3);var s={name:r,id:n(r),min:a,max:i,step:u,def:o,type:"range",group:t};e.push(s)},a=function(r,a,i){var o={name:r,id:n(r),options:a,def:i,type:"option",group:t};e.push(o)},i=this.getGeneratorNames();return a("Generator",i,i[0]),r("Super Sampling Quality",0,16,0,1),r("Master Volume",0,1,.4),t++,r("Attack Time",0,1,.1),r("Sustain Time",0,2,.3),r("Sustain Punch",0,3,2),r("Decay Time",0,2,1),t++,r("Min Frequency",20,2400,0,1),r("Start Frequency",20,2400,440,1),r("Max Frequency",20,2400,2e3,1),r("Slide",-1,1,0),r("Delta Slide",-1,1,0),t++,r("Vibrato Depth",0,1,0),r("Vibrato Frequency",.01,48,8),r("Vibrato Depth Slide",-.3,1,0),r("Vibrato Frequency Slide",-1,1,0),t++,r("Change Amount",-1,1,0),r("Change Speed",0,1,.1),t++,r("Square Duty",0,.5,0),r("Square Duty Sweep",-1,1,0),t++,r("Repeat Speed",0,.8,0),t++,r("Phaser Offset",-1,1,0),r("Phaser Sweep",-1,1,0),t++,r("LP Filter Cutoff",0,1,1),r("LP Filter Cutoff Sweep",-1,1,0),r("LP Filter Resonance",0,1,0),r("HP Filter Cutoff",0,1,0),r("HP Filter Cutoff Sweep",-1,1,0),e},this.generate=function(n){var r=2*Math.PI,a=Math.sin,i=(Math.cos,Math.pow),o=Math.abs,u=e.SampleRate,s=0|n.SuperSamplingQuality;1>s&&(s=1),u*=s;for(var f=1+n.SustainPunch,c=[{from:0,to:1,time:n.AttackTime},{from:f,to:1,time:n.SustainTime},{from:1,to:0,time:n.DecayTime}],h=c.length,d=0;h>d;d++)c[d].samples=1+(c[d].time*u|0);for(var l=void 0,p=0,v=-1,m=0,y=-1,g=0,d=0;h>d;d++)g+=c[d].samples;u/2>g&&(g=u/2);var S=g/s|0,w=new Array(S),P=0,F=0,b=t.Generators[n.Generator];void 0===b&&(b=this.Generators.square);var A=0,C=0;A=n.SquareDuty;var q=n.SquareDutySweep/u,x=0,T=n.StartFrequency*r/u,M=1+64*i(n.Slide,3)/u,D=i(n.DeltaSlide,3)/(1e3*u);void 0!==s&&(D/=s),n.MinFrequency>n.StartFrequency&&(n.MinFrequency=n.StartFrequency),n.MaxFrequency<n.StartFrequency&&(n.MaxFrequency=n.StartFrequency);var k=n.MinFrequency*r/u,G=n.MaxFrequency*r/u,L=0,V=n.VibratoFrequency*r/u,R=n.VibratoDepth,_=1+3*i(n.VibratoFrequencySlide,3)/u,E=n.VibratoDepthSlide/u,O=0,B=n.ChangeSpeed*u,W=i(n.ChangeAmount,2);W=n.ChangeAmount>0?1+10*W:1-.9*W;for(var H=1024,N=1023,j=new Array(H),I=0;H>I;I++)j[I]=0;var U=0,X=i(n.PhaserOffset,2)*(H-4),J=4e3*i(n.PhaserSweep,3)/u,Q=o(J)>1e-5||o(X)>1e-5,z=n.HPFilterCutoff>.001||n.LPFilterCutoff<.999,K=0,Y=0,Z=i(n.LPFilterCutoff,3)/10,$=1+n.HPFilterCutoffSweep/1e4,ee=5/(1+20*i(n.LPFilterResonance,2))*(.01+n.LPFilterCutoff);ee>.8&&(ee=.8),ee=1-ee;var te=n.LPFilterCutoff<.999,ne=0,re=i(n.HPFilterCutoff,2)/10,ae=1+n.HPFilterCutoffSweep/1e4,ie=0,oe=g;n.RepeatSpeed>0&&(oe=i(1-n.RepeatSpeed,2)*u+32);for(var ue=n.MasterVolume,se=0,d=0;g>d;d++){P=b(x,A,C),A+=q,0>A?A=0:A>.5&&(A=.5),ie>oe&&(x=0,T=n.StartFrequency*r/u,M=1+3*i(n.Slide,3)/u,D=i(n.DeltaSlide,3)/(1e3*u),void 0!==s&&(D/=s),O=0,B=n.ChangeSpeed*u,W=1+(0|n.ChangeAmount)/12,ie=0),ie+=1,x+=T,M+=D,T*=M,O>B&&(T*=W,B=g),O+=1,T>G?T=G:k>T&&(T=k),L+=V;var fe=T*a(L)*R;if(x+=fe,V*=_,E&&(R+=E,0>R?(R=0,E=0):R>1&&(R=1,E=0)),z){o(re)>.001&&(re*=ae,1e-5>re?re=1e-5:re>.1&&(re=.1));var ce=K;Z*=$,0>Z?Z=0:Z>.1&&(Z=.1),te?(Y+=(P-K)*Z,Y*=ee):(K=P,Y=0),K+=Y,ne+=K-ce,ne*=1-re,P=ne}if(Q){X+=J,0>X&&(X=-X,J=-J),X>N&&(X=N,J=0),j[U]=P;var he=U-(0|X)+H&N;P+=j[he],U=U+1&N}d>y&&(v+=1,l=h>v?c[v]:{from:0,to:0,samples:g},p=l.from,m=(l.to-l.from)/(l.samples+1),y+=l.samples),P*=p,p+=m,P*=ue,s>1?(F+=P,(d+1)%s===0&&(w[se]=F/s,se+=1,F=0)):w[d]=P}for(var de=u/100|0,le=new Array(de),d=0;de>d;d++)le[d]=0;return le.concat(w).concat(le)},this.Parameters=this.getParameters()}.apply(t),t}.apply(t,r),!(void 0!==a&&(e.exports=a))}]);